const e=document.getElementById("flr-blocks-login-form");e&&e.addEventListener("submit",async function(e){e.preventDefault();const s=new FormData(this),l=this.querySelector("#flr-blocks-login-submit"),r=document.getElementById("flr-blocks-login-form-result"),o=document.getElementById("flr-blocks-login-loading"),n=window.flr_blocks_ajax_object||{};if(n.ajax_url){!function(e,s,l){l&&l.classList.remove("flr-blocks-hide"),e&&(e.innerHTML="",e.classList.remove("flr-blocks-success","flr-blocks-danger")),s&&(s.disabled=!0)}(r,l,o);try{const e=await fetch(n.ajax_url,{method:"POST",body:s,credentials:"include",headers:{"X-WP-Nonce":n.nonce||""}});!function(e,s,l,r){s&&(e.status?s.classList.add("flr-blocks-success"):s.classList.add("flr-blocks-danger"),s.innerHTML=e.message),r&&r.classList.add("flr-blocks-hide"),l&&(l.disabled=!1),null!==e.return_url&&void 0!==e.return_url&&(window.location.href=e.return_url)}(await e.json(),r,l,o)}catch(e){!function(e,s,l,r){s&&(s.classList.add("flr-blocks-danger"),s.innerHTML="An error occurred. Please try again."),r&&r.classList.add("flr-blocks-hide"),l&&(l.disabled=!1),console.error("Form submission error:",e)}(e,r,l,o)}}else console.error("AJAX URL not available")});